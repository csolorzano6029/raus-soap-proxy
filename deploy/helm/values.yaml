# Default values for deployment.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  registry: bog.ocir.io
  repository: axlifq5u8m6e/dev/pge-management/pge-institutional-legal-advice-services
  # Overrides the image tag whose default is the chart appVersion.
  tag: 1.0.0
  pullPolicy: Always

imagePullSecrets:
  - pge-regcred-sct
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: false
  # Annotations to add to the service account
  annotations: { }
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: { }

podSecurityContext: { }
# fsGroup: 2000

securityContext: { }
# capabilities:
#   drop:
#   - ALL
# readOnlyRootFilesystem: true
# runAsNonRoot: true
# runAsUser: 1000

ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/enable-cors: 'true'
    nginx.ingress.kubernetes.io/cors-allow-methods: '*'
    nginx.ingress.kubernetes.io/cors-allow-origin: '*'
    nginx.ingress.kubernetes.io/rewrite-target: /institutionalLegalAdviceApi/
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
  hosts:
    - host: asesoramientojuridicodev.pge.gob.ec
      paths:
        - path: /institutionalLegalAdviceApi/
          pathType: Prefix
  tls:
    - secretName: pge-tls-sct
      hosts:
        - asesoramientojuridicodev.pge.gob.ec

hostAliases: {}
# - ip: "192.168.61.11"
#   hostnames:
#     - "keycloakdev.krugercorp.com"

service:
  type: ClusterIP
  port: 80
  targetPort: 8080

containerPorts:
  http:
    port: 8080
    protocol: TCP
  https:
    disabled: true

  #livenessProbe:
  #  tcpSocket:
  #    port: 8080
  #  initialDelaySeconds: 15
  #  timeoutSeconds: 5
  #  periodSeconds: 15
  #  failureThreshold: 5
  #readinessProbe:
  #  httpGet:
  #    path: /corporateApi/swagger-ui/index.html
  #    port: 8080
  #  initialDelaySeconds: 30
  #  timeoutSeconds: 5
  #  periodSeconds: 20
#  failureThreshold: 5

resources:
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

envVars:
  TZ: America/Guayaquil
  spring_profiles_active: prod
  JDK_JAVA_OPTIONS: "-XX:InitialRAMPercentage=70.0 -XX:MaxRAMPercentage=70.0 -XX:+UseG1GC"

configMaps:
  pge-documents-cfm:
    as: environment
    items:
      documents_server:
        envVarName: DOCUMENTS_SERVER
      documents_max_file_size:
        envVarName: DOCUMENTS_MAX_FILE_SIZE
      objects_bucket:
        envVarName: OBJECTS_BUCKET
      objects_namespace:
        envVarName: OBJECTS_NAMESPACE
      objects_path:
        envVarName: OBJECTS_PATH

secrets:
  pgef-oauth-sct:
    as: environment
    items:
      issuer_uri:
        envVarName: ISSUER_URI
      jwk_set_uri:
        envVarName: JWK_SET_URI
  pge-db-procedure-sct:
    as: environment
    items:
      db_url:
        envVarName: DB_URL
      db_username:
        envVarName: DB_USERNAME
      db_password:
        envVarName: DB_PASSWORD
  kakf-queue-mail-sct:
    as: environment
    items:
      bootstrap_servers:
        envVarName: BOOTSTRAP_SERVERS
      sasl_connection_strings:
        envVarName: SASL_CONNECTION_STRINGS
volumeMounts:
  - name: ka-document-vlm
    mountPath: /opt/nfs

volumes:
  - name: ka-document-vlm
    configMap:
      name: pge-objectstorage-config
      items:
        - key: config.ini
          path: config
        - key: key-object-storage.pem
          path: key-object-storage.pem

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeEnv:
  enable: false
  label: dev

tolerations: []

affinity: {}